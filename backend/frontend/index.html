<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TBR Logistics ‚Äì Supabase/JWT/OR-Tools</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="assets/style.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css" />
  <script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.min.js"></script>
  <script type="text/javascript" src="https://api.longdo.com/map3/?key=be18ff5b483db0626748b0c4d17ee5a9"></script>
  
</head>
<body class="bg-gray-50 text-gray-900">
  <header class="sticky top-0 z-20 bg-gradient-to-r from-green-600 to-emerald-600 text-white shadow-md border-b border-green-700">
    <div class="max-w-full mx-auto px-4 py-3 flex items-center gap-4">
      <div class="w-10 h-10 grid place-items-center rounded-lg bg-white text-green-700 font-bold text-base shadow-sm">TBR</div>
      <div class="flex-1">
        <div class="text-xs text-green-100 opacity-90">TBR Logistics System</div>
        <div class="font-semibold text-sm">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞</div>
      </div>
      <nav class="flex gap-1.5 flex-wrap">
        <button class="btn-nav" onclick="openTab('master')">üìã ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å</button>
        <button class="btn-nav" onclick="openTab('plan')">üöö ‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô</button>
        <button class="btn-nav" onclick="openTab('result')">üó∫Ô∏è ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå</button>
        <button class="btn-nav" onclick="openTab('report')">üìä ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</button>
      </nav>
    </div>
  </header>

  <main class="max-w-full mx-auto px-4 py-4 space-y-4">
    <section id="tab-master" class="tab active">
      <div class="grid md:grid-cols-2 gap-6">
        <div class="card">
          <div class="flex items-center justify-between mb-3">
            <h2 class="text-lg font-bold">‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h2>
            <div class="flex gap-2">
              <button class="btn" onclick="seedCustomers()">‡πÉ‡∏™‡πà‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á</button>
              <button class="btn primary" onclick="saveCustomer()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</button>
            </div>
          </div>
          <div class="grid grid-cols-2 gap-3">
            <input id="cust_code" class="input" placeholder="‡∏£‡∏´‡∏±‡∏™"/>
            <input id="cust_name" class="input" placeholder="‡∏ä‡∏∑‡πà‡∏≠"/>
            <input id="cust_contact" class="input" placeholder="‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠"/>
            <input id="cust_type" class="input" placeholder="‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó"/>
            <input id="cust_hours" class="input" placeholder="‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥‡∏Å‡∏≤‡∏£"/>
            <input id="cust_note" class="input" placeholder="‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î"/>
            <input id="cust_addr" class="input col-span-2" placeholder="‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà"/>
            <input id="cust_lat" class="input" placeholder="‡∏•‡∏∞‡∏ï‡∏¥‡∏à‡∏π‡∏î"/>
            <input id="cust_lng" class="input" placeholder="‡∏•‡∏≠‡∏á‡∏à‡∏¥‡∏à‡∏π‡∏î"/>
          </div>
          <div class="mt-3"><input id="cust_search" class="input" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤" oninput="loadCustomers()"/></div>
          <div class="mt-3 table-wrap">
            <table class="table"><thead><tr><th>Code</th><th>‡∏ä‡∏∑‡πà‡∏≠</th><th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th><th>GPS</th><th></th></tr></thead><tbody id="customers_tbody"></tbody></table>
          </div>
        </div>

        <div class="card">
          <div class="flex items-center justify-between mb-3">
            <h2 class="text-lg font-bold">‡∏£‡∏ñ‡∏Ç‡∏ô‡∏™‡πà‡∏á</h2>
            <div class="flex gap-2">
              <button class="btn" onclick="seedVehicles()">‡πÉ‡∏™‡πà‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á</button>
              <button class="btn primary" onclick="saveVehicle()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏ñ</button>
            </div>
          </div>
          <div class="grid grid-cols-2 gap-3">
            <input id="veh_plate" class="input" placeholder="‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô"/>
            <input id="veh_type" class="input" placeholder="‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó"/>
            <input id="veh_cap_w" class="input" placeholder="‡∏ï‡∏±‡∏ô"/>
            <input id="veh_cap_v" class="input" placeholder="‡∏•‡∏ö.‡∏°."/>
            <input id="veh_owner" class="input" placeholder="‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á"/>
            <input id="veh_cost" class="input" placeholder="‡∏ö‡∏≤‡∏ó/‡∏Å‡∏°."/>
            <select id="veh_status" class="input"><option value="ready">‡∏û‡∏£‡πâ‡∏≠‡∏°</option><option value="maintenance">‡∏ã‡πà‡∏≠‡∏°</option><option value="busy">‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà</option></select>
          </div>
          <div class="mt-3"><input id="veh_search" class="input" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤" oninput="loadVehicles()"/></div>
          <div class="mt-3 table-wrap">
            <table class="table"><thead><tr><th>‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</th><th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th><th>‡∏ï‡∏±‡∏ô/‡∏•‡∏ö.‡∏°.</th><th>‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á</th><th>‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô</th><th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th><th></th></tr></thead><tbody id="vehicles_tbody"></tbody></table>
          </div>
        </div>
      </div>
    </section>

    <section id="tab-plan" class="tab">
      <div class="card">
        <h2 class="text-xl font-bold mb-4 text-green-700">üöö ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á‡πÉ‡∏´‡∏°‡πà</h2>
        <div class="mb-4 p-3 bg-green-50 rounded-lg border border-green-200">
          <div class="flex items-center gap-3">
            <button class="btn primary" onclick="document.getElementById('file_upload').click()">
              üìÅ ‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ú‡∏ô (Excel/CSV)
            </button>
            <input type="file" id="file_upload" accept=".xlsx,.xls,.csv" style="display:none" onchange="handleFileUpload(event)"/>
            <span class="text-sm text-green-700">‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå Excel (.xlsx, .xls) ‡πÅ‡∏•‡∏∞ CSV</span>
          </div>
        </div>
        <div class="grid md:grid-cols-4 gap-4 mb-4">
          <input id="plan_name" class="input md:col-span-2" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏ú‡∏ô (‡πÄ‡∏ä‡πà‡∏ô: ‡πÅ‡∏ú‡∏ô‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡πà‡∏≤ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 15)"/>
          <input id="plan_date" type="date" class="input"/>
          <select id="plan_type" class="input">
            <option value="daily">‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</option>
            <option value="weekly">‡∏£‡∏≤‡∏¢‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</option>
            <option value="monthly">‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</option>
            <option value="yearly">‡∏£‡∏≤‡∏¢‡∏õ‡∏µ</option>
          </select>
        </div>
        <div class="mb-4">
          <select id="plan_origin_yard" class="input" onchange="selectYardOrigin()">
            <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏•‡∏≤‡∏ô (TBR Master) --</option>
          </select>
        </div>
        <div class="mb-4 p-3 bg-green-50 rounded-lg border border-green-200">
          <div class="text-sm font-semibold text-green-800 mb-2">üìç ‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (Origin)</div>
          <div class="grid grid-cols-2 gap-2">
            <input id="plan_origin_lat" class="input" placeholder="‡∏•‡∏∞‡∏ï‡∏¥‡∏à‡∏π‡∏î (Lat)" type="number" step="0.0001"/>
            <input id="plan_origin_lng" class="input" placeholder="‡∏•‡∏≠‡∏á‡∏à‡∏¥‡∏à‡∏π‡∏î (Lng)" type="number" step="0.0001"/>
          </div>
          <div class="text-xs text-green-700 mt-2">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏•‡∏≤‡∏ô TBR Master ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏£‡∏≠‡∏Å‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÄ‡∏≠‡∏á</div>
        </div>
        <div class="mt-4">
          <div class="mb-4 p-3 bg-green-50 rounded-lg border border-green-200">
            <div class="text-sm font-semibold text-green-800 mb-2">‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡πÅ‡∏•‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢</div>
            <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
              <label class="flex items-center gap-2 cursor-pointer">
                <input type="checkbox" id="consider_traffic" checked class="w-4 h-4 text-green-600"/>
                <span class="text-sm">üö¶ ‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡∏à‡∏£‡∏≤‡∏à‡∏£</span>
              </label>
              <label class="flex items-center gap-2 cursor-pointer">
                <input type="checkbox" id="consider_highway" checked class="w-4 h-4 text-green-600"/>
                <span class="text-sm">üõ£Ô∏è ‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡∏ó‡∏≤‡∏á‡∏î‡πà‡∏ß‡∏ô</span>
              </label>
              <label class="flex items-center gap-2 cursor-pointer">
                <input type="checkbox" id="consider_flood" checked class="w-4 h-4 text-green-600"/>
                <span class="text-sm">üåä ‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡∏ô‡πâ‡∏≥‡∏ó‡πà‡∏ß‡∏°</span>
              </label>
              <label class="flex items-center gap-2 cursor-pointer">
                <input type="checkbox" id="consider_breakdown" checked class="w-4 h-4 text-green-600"/>
                <span class="text-sm">üîß ‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡∏£‡∏ñ‡πÄ‡∏™‡∏µ‡∏¢</span>
              </label>
              <label class="flex items-center gap-2 cursor-pointer">
                <input type="checkbox" id="consider_hills" checked class="w-4 h-4 text-green-600"/>
                <span class="text-sm">‚õ∞Ô∏è ‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡πÄ‡∏ô‡∏¥‡∏ô‡πÄ‡∏Ç‡∏≤</span>
              </label>
            </div>
          </div>
          <div class="flex items-center justify-between">
            <div class="font-semibold">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì</div>
            <div class="flex gap-2">
              <button class="btn" onclick="addPlanRow()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏ñ‡∏ß</button>
              <button class="btn" onclick="loadTestData()">üì• ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á</button>
              <button class="btn primary" onclick="analyzePlan()">‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á</button>
            </div>
          </div>
          <div class="mt-2 table-wrap">
            <table class="table">
              <thead><tr><th>‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ (‡∏£‡πâ‡∏≤‡∏ô‡∏Ç‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡πà‡∏≤)</th><th>‡∏ï‡∏±‡∏ô</th><th>‡∏•‡∏ö.‡∏°.</th><th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th><th></th></tr></thead>
              <tbody id="plan_lines"></tbody>
            </table>
          </div>
        </div>
      </div>
    </section>

    <section id="tab-result" class="tab">
      <div class="grid lg:grid-cols-5 gap-4">
        <div class="lg:col-span-3 space-y-4">
          <div class="card">
            <div class="flex items-center justify-between">
              <h2 class="text-lg font-bold">‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÅ‡∏ú‡∏ô</h2>
              <div class="flex gap-2">
                <button class="btn" onclick="exportPlanExcel()">Export Excel</button>
                <button class="btn primary" onclick="window.print()">‡∏û‡∏¥‡∏°‡∏û‡πå / PDF</button>
              </div>
            </div>
            <div id="plan_summary" class="grid grid-cols-2 md:grid-cols-4 gap-3 mt-3"></div>
          </div>
          <div class="card">
            <div class="flex items-center justify-between mb-2">
              <h3 class="font-semibold text-sm">‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
              <div id="double_handling_alert" class="hidden"></div>
            </div>
            <div id="routes_container" class="space-y-3"></div>
          </div>
          <div class="card">
            <h3 class="font-semibold mb-2 text-sm">üìä ‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á</h3>
            <div id="route_analysis" class="space-y-3"></div>
          </div>
        </div>
        <div class="card lg:col-span-2">
          <div class="flex items-center justify-between mb-2">
            <h3 class="font-semibold text-sm">üó∫Ô∏è ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á</h3>
            <div class="flex gap-1.5 flex-wrap">
              <button class="btn-small text-xs" onclick="switchMapLayer('osm')">‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà</button>
              <button class="btn-small text-xs" onclick="switchMapLayer('satellite')">‡∏î‡∏≤‡∏ß‡πÄ‡∏ó‡∏µ‡∏¢‡∏°</button>
              <button class="btn-small text-xs" onclick="switchMapLayer('longdo')">Longdo</button>
            </div>
          </div>
          <div id="map" class="h-[600px] w-full rounded-lg border border-gray-300 shadow-sm"></div>
          <div class="mt-3 p-3 bg-green-50 rounded-lg border border-green-200">
            <div class="text-sm font-semibold text-green-800 mb-2">üìê ‡∏´‡∏≤‡∏Ç‡∏≠‡∏ö‡πÄ‡∏Ç‡∏ï‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ (Isochrone/IsoDistance)</div>
            <div class="grid grid-cols-3 gap-2 mb-2">
              <input id="isochrone_lat" class="input" placeholder="Lat" type="number" step="0.0001"/>
              <input id="isochrone_lng" class="input" placeholder="Lng" type="number" step="0.0001"/>
              <button class="btn primary" onclick="calculateIsochrone()">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ç‡∏≠‡∏ö‡πÄ‡∏Ç‡∏ï</button>
            </div>
            <div class="grid grid-cols-2 gap-2">
              <input id="isochrone_time" class="input" placeholder="‡πÄ‡∏ß‡∏•‡∏≤ (‡∏ô‡∏≤‡∏ó‡∏µ)" type="number" value="30"/>
              <input id="isochrone_distance" class="input" placeholder="‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á (km)" type="number"/>
            </div>
          </div>
          <div class="text-xs text-gray-500 mt-2 flex items-center gap-4">
            <span>üü¢ ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß = ‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (‡∏•‡∏≤‡∏ô)</span>
            <span>üü¢ ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏≠‡πà‡∏≠‡∏ô = ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ (‡∏£‡πâ‡∏≤‡∏ô‡∏Ç‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡πà‡∏≤)</span>
            <span>üü¢ ‡πÄ‡∏™‡πâ‡∏ô‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß = ‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏Ç‡∏ô‡∏™‡πà‡∏á</span>
          </div>
        </div>
      </div>
    </section>

    <section id="tab-report" class="tab">
      <div class="card">
        <h2 class="text-lg font-bold mb-4">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô & Export</h2>
        <div class="grid md:grid-cols-2 gap-4">
          <div class="p-4 rounded-xl bg-indigo-50">
            <div class="font-semibold">‡∏ä‡∏ô‡∏¥‡∏î‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</div>
            <ul class="list-disc pl-6 text-sm mt-2 space-y-1">
              <li>‡∏™‡∏£‡∏∏‡∏õ‡πÅ‡∏ú‡∏ô (PDF/Excel)</li>
              <li>‡πÉ‡∏ö‡∏á‡∏≤‡∏ô‡∏Ñ‡∏ô‡∏Ç‡∏±‡∏ö (PDF)</li>
              <li>‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô (Excel)</li>
              <li>‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û (Excel/PDF)</li>
            </ul>
          </div>
          <div class="p-4 rounded-xl bg-gray-100">
            <div class="font-semibold">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å</div>
            <ul class="list-disc pl-6 text-sm mt-2 space-y-1">
              <li>CSV/Excel (‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡∏¥‡∏ö)</li>
              <li>Print to PDF</li>
            </ul>
          </div>
        </div>
        <div class="mt-4 flex gap-2">
          <button class="btn" onclick="exportRaw('customers')">Export ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ (CSV)</button>
          <button class="btn" onclick="exportRaw('vehicles')">Export ‡∏£‡∏ñ (CSV)</button>
        </div>
      </div>
    </section>
  </main>

  <footer class="max-w-7xl mx-auto px-4 py-8 text-xs text-gray-500">¬© 2025 TBR Logistics</footer>

  <script>
    window.API_BASE = window.location.origin;
  </script>

  <!-- TBR Masters Data -->
  <script>
    window.TBR_MASTERS = {
      YARDS_MASTER: [
        { region:"‡∏†‡∏≤‡∏Ñ‡πÄ‡∏ö‡∏µ‡∏¢‡∏£‡πå", name:"‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡πÄ‡∏®‡∏©‡πÅ‡∏Å‡πâ‡∏ß‡∏ö‡∏≤‡∏á‡∏ö‡∏≤‡∏•", address:"‡∏û‡∏£‡∏∞‡∏ô‡∏Ñ‡∏£‡∏®‡∏£‡∏µ‡∏≠‡∏¢‡∏∏‡∏ò‡∏¢‡∏≤", lat:14.33616, lng:100.47968 },
        { region:"‡∏†‡∏≤‡∏Ñ‡πÄ‡∏ö‡∏µ‡∏¢‡∏£‡πå", name:"‡∏à‡∏∏‡∏î‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå 2", address:"‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå", lat:15.63689, lng:100.12873 },
        { region:"‡∏†‡∏≤‡∏Ñ‡πÄ‡∏ö‡∏µ‡∏¢‡∏£‡πå", name:"‡∏•‡∏≤‡∏ô‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡πÄ‡∏û‡∏ä‡∏£", address:"‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡πÄ‡∏û‡∏ä‡∏£", lat:16.17864, lng:99.73326 },
        { region:"‡∏†‡∏≤‡∏Ñ‡πÄ‡∏ö‡∏µ‡∏¢‡∏£‡πå", name:"‡∏•‡∏≤‡∏ô‡∏ö‡∏≤‡∏á‡∏ö‡∏≤‡∏•", address:"‡∏≠‡∏¢‡∏∏‡∏ò‡∏¢‡∏≤", lat:14.32986, lng:100.47799 },
        { region:"‡∏†‡∏≤‡∏Ñ‡πÄ‡∏ö‡∏µ‡∏¢‡∏£‡πå", name:"‡∏•‡∏≤‡∏ô‡∏ß‡∏±‡∏á‡∏ô‡πâ‡∏≠‡∏¢", address:"‡∏≠‡∏¢‡∏∏‡∏ò‡∏¢‡∏≤", lat:14.18774, lng:100.6339 },
        { region:"‡∏†‡∏≤‡∏Ñ‡πÄ‡∏ö‡∏µ‡∏¢‡∏£‡πå", name:"‡∏•‡∏≤‡∏ô‡∏™‡∏µ‡∏°‡∏≤‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à", address:"‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå", lat:15.93761, lng:99.94671 },
        { region:"‡∏†‡∏≤‡∏Ñ‡πÄ‡∏´‡∏ô‡∏∑‡∏≠", name:"‡∏à‡∏∏‡∏î‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏•‡∏≥‡∏û‡∏π‡∏ô", address:"‡∏•‡∏≥‡∏û‡∏π‡∏ô", lat:18.64271, lng:99.05027 },
        { region:"‡∏†‡∏≤‡∏Ñ‡πÄ‡∏´‡∏ô‡∏∑‡∏≠", name:"‡∏•‡∏≤‡∏ô‡∏ò‡∏ô‡∏†‡∏±‡∏Å‡∏î‡∏µ", address:"‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà", lat:19.04388, lng:98.96674 },
        { region:"‡∏†‡∏≤‡∏Ñ‡πÄ‡∏´‡∏ô‡∏∑‡∏≠", name:"‡∏•‡∏≤‡∏ô‡∏°‡∏á‡∏Ñ‡∏•‡∏™‡∏°‡∏±‡∏¢", address:"‡∏≠‡∏∏‡∏ï‡∏£‡∏î‡∏¥‡∏ï‡∏ñ‡πå", lat:17.64006, lng:100.2385 },
        { region:"‡∏†‡∏≤‡∏Ñ‡πÉ‡∏ï‡πâ", name:"‡∏à‡∏∏‡∏î‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏†‡∏π‡πÄ‡∏Å‡πá‡∏ï", address:"‡∏†‡∏π‡πÄ‡∏Å‡πá‡∏ï", lat:7.99312, lng:98.36943 },
        { region:"‡∏†‡∏≤‡∏Ñ‡πÉ‡∏ï‡πâ", name:"‡∏•‡∏≤‡∏ô‡∏ô‡∏ó‡∏µ‡∏ä‡∏±‡∏¢", address:"‡∏™‡∏∏‡∏£‡∏≤‡∏©‡∏é‡∏£‡πå‡∏ò‡∏≤‡∏ô‡∏µ", lat:9.08716, lng:99.17357 },
        { region:"‡∏†‡∏≤‡∏Ñ‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏ï‡∏Å", name:"‡πÇ‡∏Å‡∏î‡∏±‡∏á‡∏ß‡∏±‡∏á‡∏Ç‡∏ô‡∏≤‡∏¢", address:"‡∏Å‡∏≤‡∏ç‡∏à‡∏ô‡∏ö‡∏∏‡∏£‡∏µ", lat:13.95321, lng:99.65422 },
        { region:"‡∏†‡∏≤‡∏Ñ‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏ï‡∏Å", name:"‡∏à‡∏∏‡∏î‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ô‡∏Ñ‡∏£‡∏õ‡∏ê‡∏°", address:"‡∏ô‡∏Ñ‡∏£‡∏õ‡∏ê‡∏°", lat:13.8122, lng:100.07596 },
        { region:"‡∏†‡∏≤‡∏Ñ‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏ï‡∏Å", name:"‡∏•‡∏≤‡∏ô‡πÅ‡∏™‡∏á‡πÇ‡∏™‡∏°", address:"‡∏ô‡∏Ñ‡∏£‡∏õ‡∏ê‡∏°", lat:13.80447, lng:100.2476 },
        { region:"‡∏†‡∏≤‡∏Ñ‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏ï‡∏Å", name:"‡∏•‡∏≤‡∏ô‡∏Å‡∏≤‡∏ç‡∏à‡∏ô‡∏™‡∏¥‡∏á‡∏Ç‡∏£", address:"‡∏Å‡∏≤‡∏ç‡∏à‡∏ô‡∏ö‡∏∏‡∏£‡∏µ", lat:14.08503, lng:99.49957 },
        { region:"‡∏†‡∏≤‡∏Ñ‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏ï‡∏Å", name:"‡∏•‡∏≤‡∏ô‡∏¢‡∏π‡πÑ‡∏ô‡πÄ‡∏ï‡πá‡∏î‡∏Ø", address:"‡∏ô‡∏Ñ‡∏£‡∏õ‡∏ê‡∏°", lat:13.79662, lng:100.18958 },
        { region:"‡∏†‡∏≤‡∏Ñ‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏ï‡∏Å", name:"‡∏•‡∏≤‡∏ô‡∏™‡∏∏‡∏£‡∏≤‡∏Å‡∏£‡∏∞‡∏ó‡∏¥‡∏á‡πÅ‡∏î‡∏á", address:"‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏™‡∏≤‡∏Ñ‡∏£", lat:13.65303, lng:100.28847 },
        { region:"‡∏†‡∏≤‡∏Ñ‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏ï‡∏Å", name:"‡∏•‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏Å‡∏ä‡∏±‡∏¢‡∏Ñ‡πâ‡∏≤‡∏™‡∏∏‡∏£‡∏≤", address:"‡∏£‡∏≤‡∏ä‡∏ö‡∏∏‡∏£‡∏µ", lat:13.59308, lng:99.80441 },
        { region:"‡∏†‡∏≤‡∏Ñ‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏≠‡∏≠‡∏Å", name:"‡∏à‡∏∏‡∏î‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠‡∏ö‡∏≤‡∏á‡∏û‡∏•‡∏µ", address:"‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏õ‡∏£‡∏≤‡∏Å‡∏≤‡∏£", lat:13.59385, lng:100.80435 },
        { region:"‡∏†‡∏≤‡∏Ñ‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏≠‡∏≠‡∏Å", name:"‡∏•‡∏≤‡∏ô‡∏ö‡∏≤‡∏á‡∏¢‡∏µ‡πà‡∏Ç‡∏±‡∏ô", address:"‡∏õ‡∏ó‡∏∏‡∏°‡∏ò‡∏≤‡∏ô‡∏µ", lat:13.95288, lng:100.49976 },
        { region:"‡∏†‡∏≤‡∏Ñ‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏≠‡∏≠‡∏Å", name:"‡∏à‡∏∏‡∏î‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠‡∏ö‡πâ‡∏≤‡∏ô‡∏ö‡∏∂‡∏á", address:"‡∏ä‡∏•‡∏ö‡∏∏‡∏£‡∏µ", lat:13.60917, lng:100.79854 },
        { region:"‡∏†‡∏≤‡∏Ñ‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏≠‡∏≠‡∏Å", name:"‡∏à‡∏∏‡∏î‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û", address:"‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏Ø", lat:13.69784, lng:100.48059 },
        { region:"‡∏†‡∏≤‡∏Ñ‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏≠‡∏≠‡∏Å", name:"‡∏•‡∏≤‡∏ô‡πÄ‡∏ü‡∏∑‡πà‡∏≠‡∏á‡∏ü‡∏π‡∏≠‡∏ô‡∏±‡∏ô‡∏ï‡πå", address:"‡∏õ‡∏£‡∏≤‡∏à‡∏µ‡∏ô‡∏ö‡∏∏‡∏£‡∏µ", lat:13.96075, lng:101.56947 },
        { region:"‡∏†‡∏≤‡∏Ñ‡∏≠‡∏µ‡∏™‡∏≤‡∏ô‡∏ö‡∏ô", name:"‡∏à‡∏∏‡∏î‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô", address:"‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô", lat:16.34200, lng:102.83575 },
        { region:"‡∏†‡∏≤‡∏Ñ‡∏≠‡∏µ‡∏™‡∏≤‡∏ô‡∏ö‡∏ô", name:"‡∏•‡∏≤‡∏ô‡πÄ‡∏ó‡∏û‡∏≠‡∏£‡∏∏‡πÇ‡∏ì‡∏ó‡∏±‡∏¢", address:"‡∏´‡∏ô‡∏≠‡∏á‡∏Ñ‡∏≤‡∏¢", lat:17.92127, lng:102.80889 },
        { region:"‡∏†‡∏≤‡∏Ñ‡∏≠‡∏µ‡∏™‡∏≤‡∏ô‡∏ö‡∏ô", name:"‡∏•‡∏≤‡∏ô‡πÅ‡∏Å‡πà‡∏ô‡∏Ç‡∏ß‡∏±‡∏ç", address:"‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô", lat:16.73728, lng:102.8184 },
        { region:"‡∏†‡∏≤‡∏Ñ‡∏≠‡∏µ‡∏™‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á", name:"‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡πÄ‡∏®‡∏©‡πÅ‡∏Å‡πâ‡∏ß‡πÇ‡∏Ñ‡∏£‡∏≤‡∏ä", address:"‡∏ô‡∏Ñ‡∏£‡∏£‡∏≤‡∏ä‡∏™‡∏µ‡∏°‡∏≤", lat:15.08781, lng:102.20054 },
        { region:"‡∏†‡∏≤‡∏Ñ‡∏≠‡∏µ‡∏™‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á", name:"‡∏à‡∏∏‡∏î‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠‡πÇ‡∏Ñ‡∏£‡∏≤‡∏ä", address:"‡∏ô‡∏Ñ‡∏£‡∏£‡∏≤‡∏ä‡∏™‡∏µ‡∏°‡∏≤", lat:15.08781, lng:102.20054 },
        { region:"‡∏†‡∏≤‡∏Ñ‡∏≠‡∏µ‡∏™‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á", name:"‡∏à‡∏∏‡∏î‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠‡∏ß‡∏≤‡∏£‡∏¥‡∏ô‡∏Ø", address:"‡∏≠‡∏∏‡∏ö‡∏•‡∏£‡∏≤‡∏ä‡∏ò‡∏≤‡∏ô‡∏µ", lat:15.19291, lng:104.82494 },
        { region:"‡∏†‡∏≤‡∏Ñ‡∏≠‡∏µ‡∏™‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á", name:"‡∏•‡∏≤‡∏ô‡πÄ‡∏≠‡∏™.‡πÄ‡∏≠‡∏™. ‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡∏£‡∏≤", address:"‡∏≠‡∏∏‡∏ö‡∏•‡∏£‡∏≤‡∏ä‡∏ò‡∏≤‡∏ô‡∏µ", lat:15.23868, lng:105.15134 },
        { region:"‡∏†‡∏≤‡∏Ñ‡∏≠‡∏µ‡∏™‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á", name:"‡∏•‡∏≤‡∏ô‡∏≠‡∏ò‡∏¥‡∏°‡∏≤‡∏ï‡∏£", address:"‡∏ö‡∏∏‡∏£‡∏µ‡∏£‡∏±‡∏°‡∏¢‡πå", lat:15.30207, lng:103.24892 }
      ]
    };
  </script>

  <!-- ‡πÅ‡∏≠‡∏õ‡∏´‡∏•‡∏±‡∏Å -->
  <script src="assets/app.js"></script>
</body>
</html>
